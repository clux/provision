---
# pacman interface

- name: Install dependencies
  pacman: name={{ item }} state=installed
  with_items:
  # terminal tools
  - alacritty
  - git
  - bc
  - rsync
  - choose
  - jq
  - bash-bats
  - ripgrep
  - exa
  - tokei
  - fd
  - bat
  - hyperfine
  - vivid
  - fzf
  #- skim
  - sd
  - zoxide
  - man-pages
  - man-db
  - procs
  - dust
  - git-delta
  - github-cli
  - starship
  - helix
  - asciinema
  - terraform
  - datamash
  - genact
  - zellij
  - zsh
  #- zsh-autosuggestions #zinit
  #- zsh-fast-syntax-highlighting #aur atm
  # social
  - hugo
  - signal-desktop
  #- discord (webcord on wayland)
  # music
  #- musescore
  - ncspot
  # programming
  - python-pip
  #- ipython
  #- pypy3
  - ruff
  - mypy
  - cmake
  - clang
  - compiler-rt
  #- llvm
  #- musl
  #- postgresql-libs # for diesel cli
  - go
  #- nodejs
  #- npm
  #- yarn
  - rustup
  - rust-analyzer
  # system tools
  - strace
  - perf
  - lsof
  # network
  #- networkmanager-openvpn
  #- openvpn
  #- nmap
  #- net-tools # netstat
  #- bind-tools  # contains dig
  #- traceroute
  #- bmon
  - bandwhich
  #- trickle
  - nethogs
  #- trickle (aur)
  # wifi
  #- iwd
  #- create_ap (aur)
  # other hardware
  - lm_sensors # temperature/sensor dump from motherboard
  - udisks2 # easy usb mount
  - udiskie # auto udisk2
  # container services
  - docker
  - docker-buildx
  #- docker-compose (can generally use tilt)
  #- ctop
  #- conntrack-tools # k8s > 1.18 dependency
  - kustomize
  - kubectl
  - helm
  - k9s
  #- vault
  # ssh + secrets managers
  - keychain
  #- keybase-gui
  #- keybase
  - pass
  - pwgen
  - openssh
  #- yubikey-manager
  #- yubikey-manager-qt
  # music
  #- mpd
  #- ncmpcpp
  - playerctl
  # ebooks
  #- poppler
  #- calibre
  # chromecast - see https://wiki.archlinux.org/index.php/VLC_media_player#Chromecast_support to enable mdns
  - libmicrodns
  - protobuf
  # browsers
  - chromium
  - firefox
  # media
  #- vlc
  - mpv
  #- mpv-mpris (maybe.. aur)
  - feh
  #- gimp
  #- gthumb (lots of deps..)
  - imagemagick
  #- gedit
  #- gphoto2
  # filesystems
  #- ntfs-3g
  #- nemo-fileroller
  #- nemo-share
  - ranger
  #- joshuto (maybe.. ranger replacement on aur)
  #- gvfs-smb
  #- mtpfs # kindle
  #- android-file-transfer
  #- gptfdisk
  # fonts
  - ttf-ubuntu-font-family
  - ttf-inconsolata-nerd
  - otf-ipafont # japanese
  - adobe-source-han-sans-kr-fonts # korean
  #- fonts-tlwg # thai AUR
  - wqy-microhei # chinese
  - noto-fonts-emoji # google's emoji font

# Net Caps on networking tools
- capabilities: path=/sbin/nethogs capability=cap_net_raw+ep,cap_net_admin+ep
- capabilities: path=/sbin/bandwhich capability=cap_net_raw,cap_net_admin+ep

- name: Install dependencies
  pacman: name={{ item }} state=installed
  with_items:
  - steam
  when: inventory_hostname == "kjttks"

- name: Link hx -> helix
  ansible.builtin.file:
    src: /sbin/helix
    dest: /usr/local/bin/hx
    owner: clux
    group: clux
    state: link
