---
# npm playbook - install cli tools globally

- name: npm config set prefix ~/.node_modules
  lineinfile:
    dest: /home/{{ user }}/.npmrc
    regexp: '^prefix='
    line: 'prefix=/home/{{ user }}/.node_modules'

- set_fact:
    npm_state: "{{ 'latest' if (upgrade_tasks | default(false)) else 'present' }}"

- name: Install global npm dependencies
  npm: name={{ item }} state={{ npm_state }} global=true
  with_items:
  - faucet
  - eslint
  - jshint
  - asciify
  - marked-man
  - reveal-md
  - zalgolize
  - ajv-cli
  - yamljs
